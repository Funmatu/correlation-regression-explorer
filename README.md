# Interactive Correlation & Regression Explorer

![License](https://img.shields.io/badge/license-MIT-blue.svg) ![Status](https://img.shields.io/badge/status-active-success.svg)

「2変量間の関係性を捉えるための統計的指標（相関係数）」と「回帰モデリングによる予測」の違いを視覚的に理解するためのインタラクティブなシミュレーターです。

2021年に提案された新しい指標である **Chatterjee係数 ($\xi_n$)** を含め、既存の指標や機械学習モデルが、様々なデータ分布に対してどのように振る舞うかをブラウザ上で比較・検証できます。

## 🚀 デモ (Live Demo)

インストール不要で、すぐに動作を確認できます。

**[👉 アプリを起動する (GitHub Pages)](https://funmatu.github.io/correlation-regression-explorer/)**

---

## 📖 概要 (Overview)

統計解析や機械学習の実務において、単一の相関係数だけを見て判断することは危険です。このツールは以下の疑問に答えるための実験場を提供します。

*   「相関係数が0に近いのに、明らかな関係性があるのはなぜか？」
*   「非線形なデータに対して、どの指標を使うべきか？」
*   「モデルの次数を上げすぎると何が起きるのか（過学習）？」

## 📊 機能と指標 (Features & Metrics)

### 1. 統計的指標の比較
各指標の特性をリアルタイムに計算・比較します。

| 指標 | 特性・定義 | 強み・弱み |
| :--- | :--- | :--- |
| **Pearson**<br>(積率相関) | 線形関係のみを捉える | ✅ **強み:** 線形性の評価に最適。<br>⚠️ **弱み:** 非線形（U字型など）は0になる。外れ値に弱い。 |
| **Spearman**<br>(順位相関) | 単調増加・減少関係を捉える | ✅ **強み:** データが正規分布でなくても有効。<br>⚠️ **弱み:** 単調でない関係（円や波）は捉えられない。 |
| **Chatterjee ($\xi_n$)**<br>(2021年提案) | あらゆる関数関係 $Y=f(X)$ を捉える | ✅ **強み:** **非対称性**を考慮でき、計算が高速 ( $O(N \log N)$ )。<br>⚠️ **弱み:** ランクベースのためノイズに敏感。関数でない関係（円など）は低い。 |
| **Distance Corr**<br>(距離相関) | 独立性を検定する（線形・非線形不問） | ✅ **強み:** **位相構造**に強く、円形や複雑な依存関係も検出可能。<br>⚠️ **弱み:** 計算コストが高い ( $O(N^2)$ )。 |
| **$R^2$ Score**<br>(決定係数) | モデルの予測精度 | ✅ **強み:** 「関係があるか」だけでなく「どれだけ説明できるか」を示す。 |

### 2. 回帰モデリングとの対比
統計量だけでなく、実際にモデルを作成して適合度を可視化します。

*   **決定木 (Decision Tree):**
    *   非線形データへの適応力が高いが、階段状の近似になるため滑らかさに欠ける。
    *   ノイズまで学習してしまう「過学習」のリスクを観察可能。
*   **多項式回帰 (Polynomial Regression):**
    *   最小二乗法に基づくカーブフィッティング。
    *   **次数 (Degree) スライダー**機能により、次数を上げた際の過学習（ルンゲ現象のような線の暴れ）を視覚化。

---

## 💡 理論的背景とインサイト (Theoretical Insights)

このシミュレーターを通じて得られる、実務的・統計的な洞察です。

### 1. Chatterjee係数 vs 距離相関
*   **Chatterjee係数**は「 $Y$ が $X$ で決まるか（関数従属性）」を見ます。したがって、ノイズが少ない $Y=X^2$ のようなデータでは非常に高い値を示しますが、円形データ ($X^2+Y^2=r^2$) のように「$X$に対して$Y$が2つある（関数ではない）」場合は値が低くなります。
*   **距離相関**は「分布の独立性」を見るため、円形や螺旋状のデータであっても、そこに構造がある限り高い値を示します。

### 2. 相関係数 vs モデリング (実務的な示唆)
複雑な波形（Sine Waveなど）に対して、PearsonやSpearmanなどの相関係数はしばしば「無相関」に近い値を示します。
しかし、モデリングを行うと $R^2$（予測精度）は非常に高くなります。これは、**「相関係数が低い = 変数に価値がない」わけではない**ことを示しています。実務で変数選択を行う際は、相関係数だけでなく、LightGBM等の決定木ベースモデルでの重要度（Feature Importance）を確認すべき理由がここにあります。

### 3. 多項式回帰と過学習 (Overfitting)
多項式回帰の次数を極端に上げる（例: Degree=15）と、データ点すべてを通ろうとするあまり、データのない区間で予測線が激しく振動します（高バリアンス）。
$R^2$ スコアは向上しても、モデルとしては使い物にならなくなる **「過学習」** の典型例を視覚的に体験できます。

---

## 🛠 技術スタック (Tech Stack)

外部の統計解析ライブラリに依存せず、アルゴリズムをスクラッチで実装しています。

*   **HTML5 / JavaScript (ES6+):** フレームワークなしの軽量Vanilla JS実装。
*   **Plotly.js:** 高度なインタラクティブグラフ描画。
*   **Tailwind CSS:** レスポンシブでモダンなUIデザイン。
*   **Algorithms:**
    *   **Linear Algebra:** ガウスの消去法 (Gaussian Elimination) による正規方程式 ($X^TX\beta = X^TY$) の解法を実装し、クライアントサイドで多項式回帰係数を算出。
    *   **Statistics:** 各種相関係数（Pearson, Spearman, Chatterjee, Distance Correlation）の計算ロジックをJSで実装。

## 📦 インストールと実行方法

本プロジェクトは単一のHTMLファイルで完結しています。

1.  このリポジトリをクローンまたはダウンロードします。
    ```bash
    git clone https://github.com/Funmatu/correlation-regression-explorer.git
    ```
2.  `index.html` をお使いのWebブラウザ（Chrome, Firefox, Edge, Safari等）で開くだけで実行できます。

## 📝 License

This project is licensed under the MIT License.
